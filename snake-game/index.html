<html>
<head>

</head>

<body>

</body>

<script>

var cols = 100;
var rows = 30;
var SNAKE = 1;
var EMPTY = 0;
var FOOD = 2;
var grid = [];

var LEFT = 6;
var UP = 8;
var DOWN = 2;
var RIGHT = 4;
var queue = [];
var direction = LEFT;

var head = {x:3,y:6};
var food = {x:0,y:0};

var score = 0;
canvas = document.createElement("canvas")
	canvas.width = 10 * cols;
	canvas.height = 10 * rows;
	canvas.id = "myCanvas";

	document.body.appendChild(canvas);

	var c = document.getElementById("myCanvas");


	var ctx = c.getContext("2d");


for(x = 0 ; x < cols ; x++)
{
	grid.push([]);
	for(y = 0; y < cols ; y++)
		grid[x].push(EMPTY);
}



function setSnake(){
	for(var i = 0; i<queue.length; i++)
		grid[queue[i].x][queue[i].y] = SNAKE;
}

function fillColors(){
	for(var i=0; i<cols;i++)
	{
		for(var j=0; j<rows;j++)
		{
			//ctx.strokeRect(i*10,j*10,10,10);
			if(grid[i][j] == SNAKE)
			{
				ctx.fillStyle = "#000";
				ctx.fillRect(i*10,j*10,10,10);
			}
			if(grid[i][j] == FOOD)
			{
				ctx.fillStyle = "#0ff";
				ctx.fillRect(i*10,j*10,10,10);
			}
			if(grid[i][j] == EMPTY)
			{
				//ctx.fillStyle = "#fff";
				//ctx.fillRect(i*10,j*10,10,10);
			 }
		}
	}
}

function setFood(ctx) {
	food.x = Math.floor(Math.random()*(cols-2))+1;
	food.y = Math.floor(Math.random()*(rows-2))+1;
	grid[food.x][food.y] = FOOD;
}
function init()
{
	main();
	move();
}

window.addEventListener("keydown", onKeyDown, false);


function onKeyDown(event)
{
	
	var keyCode = event.keyCode;
	switch(keyCode)
	{
		case 37:
			if(direction!=LEFT)
			direction = RIGHT;
			break;
		case 38:
			if(direction!=DOWN)
			direction = UP;
			break;
		case 39:
			if(direction!=RIGHT)
			direction = LEFT;
			break;
		case 40:
			if(direction!=UP)
			direction = DOWN;
			break;
		case 32:
			direction = 0;
			break;
	}
}

function main()
{
	
	ctx.clearRect(0,0,10*cols,10*rows);
	ctx.strokeRect(0,0,10*cols,10*rows);
	
	queue.push(head);
	setSnake();
	setFood();
	fillColors(ctx);

}
var frames = 0;
function move()
{
	
	
	frames++;
	if(frames%5 == 0)
	{
	switch(direction)
	{
		case LEFT:
			if(head.x<cols-1)
			{
			var tobepushed = {x:head.x+1, y:head.y};
			if(tobepushed.x == food.x && tobepushed.y == food.y)
			{
				console.log("yes");
				score++;
				setFood();
			}
			else
			{
				var removed = queue.shift();
				grid[removed.x][removed.y] = EMPTY;
			}
			queue.push(tobepushed);
			setSnake();
			head = tobepushed;
			ctx.clearRect(0,0,10*cols,10*rows);
			ctx.strokeRect(0,0,10*cols,10*rows);
			fillColors();
			}
			break;
		case RIGHT:
			if(head.x>0)
			{
			var tobepushed = {x:head.x-1, y:head.y};
			if(tobepushed.x == food.x && tobepushed.y == food.y)
			{
				console.log("yes");
				score++;
				setFood();
			}
			else
			{
				var removed = queue.shift();
				grid[removed.x][removed.y] = EMPTY;
			}
			queue.push(tobepushed);
			setSnake();
			head = tobepushed;
			ctx.clearRect(0,0,10*cols,10*rows);
			ctx.strokeRect(0,0,10*cols,10*rows);
			fillColors();
			}
			break;
		case UP:
			if(head.y>0)
			{
			var tobepushed = {x:head.x, y:head.y-1};
			if(tobepushed.x == food.x && tobepushed.y == food.y)
			{

				console.log("yes");
				score++;
				setFood();
			}
			else
			{
				var removed = queue.shift();
				grid[removed.x][removed.y] = EMPTY;
			}
			queue.push(tobepushed);
			setSnake();
			head = tobepushed;
			ctx.clearRect(0,0,10*cols,10*rows);
			ctx.strokeRect(0,0,10*cols,10*rows);
			fillColors();
			}
			break;
		case DOWN:
			if(head.y<rows-1)
			{
			var tobepushed = {x:head.x, y:head.y+1};
			if(tobepushed.x == food.x && tobepushed.y == food.y)
			{
				console.log("yes");
				score++;
				setFood();
			}
			else
			{
				var removed = queue.shift();
				grid[removed.x][removed.y] = EMPTY;
			}
			
			
			queue.push(tobepushed);
			setSnake();
			head = tobepushed;
			ctx.clearRect(0,0,10*cols,10*rows);
			ctx.strokeRect(0,0,10*cols,10*rows);
			fillColors();
			}
			break;
	}
}
	window.requestAnimationFrame(move);

}


init();




</script>

</html>