<html>
<head>

</head>

<body>
<canvas id="myCanvas" width="1000" height="500" style="border:1px solid #000000;">
</canvas>

</body>

<script>

function init()
{
	window.requestAnimationFrame(draw);
}
var x = 0;
var y = 0;
var state = 8;

window.addEventListener("keydown", onKeyDown, false);


function onKeyDown(event)
{
	console.log("key down fired");
	var keyCode = event.keyCode;
	switch(keyCode)
	{
		case 37:
			state = 4;
			break;
		case 38:
			state = 2;
			break;
		case 39:
			state = 6;
			break;
		case 40:
			state = 8;
			break;
		case 32:
			state = 0;
			break;
	}
}
var state = 0;
var move = 3;
function draw()
{
	var c = document.getElementById("myCanvas");


	var ctx = c.getContext("2d");
	ctx.clearRect(0,0,1000,500);
	
	ctx.fillRect(x,y,10,10);
	switch(state)
	{
		case 2:
			if(y>0)
				y -= move;
			break;
		case 4:
			if(x>0)
				x-=move;
			break;
		case 6:
			if(x<990)
				x += move;
			break;
		case 8:
			if(y<490)
				y+= move;
			break;
		case 0:
			break;
		
	}
	
	window.requestAnimationFrame(draw);
}

init();




</script>

</html>